from utilities.get_input import *
from utilities.parse import *
import time, re
from utilities.Grid import Grid

test_input = """#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#"""

sam_input = """...##....
.#.##.#..
.#....#..
.##..##..
...##....
..####.##
#..##..##

##...##..
.##.#..#.
.#.......
...#.##.#
##..#..#.
.##..##..
.#...##..
#.#######
....####.
..##.##.#
..##.##.#
....####.
#.#######
.#...##..
.##..##..
#...#..#.
...#.##.#

...#...##...###
##.#.##.#..#.##
####.##.#..#.##
#.#.##.###.#.##
#...##.##...#.#
##..#.###...#..
#...####.###...
#.#####...##.##
#.#####...##.##
#...####.###...
##..#.###...#..
#...##.##...#.#
#.#.##.###.#.##
####.##.#..#.##
##.#.##.#..#.##

.....#.
###.###
##.#.##
..#..##
..###..
..###..
..#..##
##.#.##
###.###
.....##
###..#.
..#..##
##.####

....#....##....
.##..##.####.##
#..#.#...##...#
.##.####....###
#..#.##.####.##
#..###.#.##.#.#
.##.##.##..####

..##..##..#.#.#
.####......#.#.
.#.#.###...#..#
.##.#..##.....#
..#.#.##..###.#
..#.#.##..###.#
.##.#..##.....#
.#.#.###...#..#
.####......#.#.
..##..##..#.#.#
#...#..#...#...
.#.#.##..##...#
.#.#.##..###..#

#...##...#.#.##.#
#...##...#.#.####
#.##..##.##.##.#.
............###.#
....##.....###.##
#..#..#..#.##....
#.#....#.#..##.##
..######...####.#
#.#....#.#..#####
.#.####.#.#.###..
.##.##.##..#...##

##.##....##.##...
##....##....##.##
#.##..##..##.##..
.##.#.##.#.##.#..
..##.....###...##
####.#..#.####.##
.#..........#....
#####.##.######..
#..#.####.#..#...

#.##..###.#..
.#...###...#.
##...####....
####..#.#.#..
#.....##..###
#.....##..###
####..#.#.#..
##...####..#.
.#...###...#.
#.##..###.#..
###.#.####..#
.##.#.#...###
#.##.######.#
#..#.......#.
#..#.......#.

###...##...##
...#..#####.#
###.##.#.....
..#...#...###
..##.###.....
....#...#...#
#####...##.##
....#.##.####
....#.##.##.#

..##..###...#....
##..#######...###
##..###.......#.#
..##..#.#....####
########...###...
.####........#...
.####.#..##...###
.#..#...###.#.###
.####.#.###.##...
#.##.#..####.#...
#.##.#..##...#...

#.#....#.##
..#....#...
..#....#...
#.#....#.##
##......##.
.#.####.#..
####.#####.

...##...#..#.
########...#.
.######..#...
..#..#.....##
#.#..#.#####.
##....##.####
..####...###.
#.#..#.##.#.#
#......#.###.
.#.##.#.####.
.#.##.#.####.
#......#.###.
#.#..#.#..#.#

##....#.##.##.##.
####......#..#...
#...###..######..
#...#.##..#..#..#
.#.##.#.########.
.#.##.#.########.
....#.##..#..#..#

###..##.#
##.#..##.
##..#....
....#....
..#......
..##..##.
##.#.#..#

.....#...#.
..##...#...
##..###...#
.#..#.#.###
#.##.#.##..
.#..#.##.##
#######.##.
.........##
..##....#.#
.......#..#
.#..#.####.
#....#####.
#.##.#..#.#
#.##.#..#.#
#....#####.
.#..#.####.
.......#..#

#.####.
#.####.
...#...
##...##
....#..
#....#.
.#..#..
#..#.##
#.#....
.#..#.#
.#..#.#
#.#...#
#..#.##

.##..##..#.##
#..#..#..#.##
....####.####
....###.##.##
.####..##.###
.....#...#.##
#..##.##...##
####.###.....
.##..#....###
#..#..#..####
.##.#####.#..
......###.###
#..#####..#..
#..##.....###
#..#..#.#..##

.###..##..###
.#.#.#..#.#.#
....##..##...
....##..##...
##.#.#..#.#.#
.###..##..###
###.#....#.##

##.########.##.
###.#.#..#.####
..#...##...#..#
###.##..##.###.
#.#.##..##.#.#.
.##.#.##.#.##.#
.##.#.##.#.##.#

.#..##.
..#..##
###.###
###.###
..#..##
.#..##.
.#.##..
#...##.
#...##.
.#.##..
.#..##.
#.#..##
###.###

......#.#.#.#
......#.#.#.#
#..##...##..#
#..##..##..#.
..#.##.##.##.
#..##..#..#.#
#..#.#..#####
#..#.##.##..#
....####..##.
.##..#..##.#.
####.#...##..
.....#.####.#
#..#....###..

.#...#.#...##..
#....#.#.......
..##.#.....##..
####.###..####.
.#.#.#...#.....
##...###.......
..##.#.########
.####.....#..#.
.#.#..##.......
##.#..#.##.##.#
..#....#.#....#
..#....#.#....#
##.#..#.##.##.#
.#.#..##.......
.####.....#..#.
..##.#.########
##...###.......

.......#.#.####
.......#.#.####
..##..####.##.#
#...####.####.#
##..##.####.##.
#....##.#.###..
.####..#...#.#.
#.##.#.##.##..#
..##.......#.#.
#....##..#..#.#
..##...##..##.#
#######.#....##
#.##.#..##.#.#.

....##..#
..#.##..#
..#.###.#
#......##
...##....
.##..#.#.
#.#.#....
#..#....#
.##.###..
###.#.##.
###.#.##.

######.
.###...
##.##.#
#..##..
#..##..
##.##.#
.###...
######.
...#...
..##.##
##...##
##....#
..##.##
...#...
######.
.###...
##.##.#

....###.#..
.##.##.####
.##.##.####
....#####..
######.#..#
#####..#.#.
....##...#.
.##.##.#..#
.##.##..#.#
#..#.#.#.##
.##..###.##
....###...#
.##.##.#...
####.#.#.#.
#..#.##..#.

##..#.##.#.#..#..
..#....#..##.##.#
...##...####..###
###..#.#..#.##.##
###..#....#.##.##
...##...####..###
..#....#..##.##.#
##..#.##.#.#..#..
..#.##..#.#..#..#
..##..#...#....##
..####..##.....##

.......####..#..#
.##.#....###..##.
###..#.###.###..#
##.##...#########
....###......#..#
.#.########...##.
#.......###.####.
#...##..##.##.##.
#.#.#.#....#.....
##....###..###..#
..#.##.###.#.####
..#.##.###.#.####
##....###..###..#
#.#.#.#....#.....
#...##..##.##.##.

###..##
..#.#.#
####.#.
...#..#
##.#..#
##.#.##
...#..#
####.#.
..#.#.#

####...
...##..
###..##
##.###.
##.###.
###..##
...##..
####...
#.##...
....#..
##..###

.###...##
.###...##
.##.##.#.
....##..#
##.###.#.
.#..##..#
###.#..##
#.#.####.
#.#.####.
###.#..##
.#...#..#
##.###.#.
....##..#
.##.##.#.
.###...##

#.##.##.#..#.##.#
..##.##.####.##.#
#.###############
..#..............
#.#..##......##..
.#.##..##..##..##
#........##......
##.#..#.#..#.#..#
....####....####.
#....##......##..
...#.##.#..#.##.#
##..####.##.####.
#..#....#..#....#
.#..#..#.##.#..#.
.....##......##..

.#....#.#...##...
.#.##.#..#.####.#
#..##..#.#.#..#.#
##.##.##..##..##.
###..######.##.##
########.#.#..#.#
...##...#..####..
#......#.#......#
.##..##...##..###

..##.#.#.##.#.#
..##.#.#.##.#.#
##..#....##.###
...#..#.#..#...
.#.####..####..
..##.##..####.#
##....#.##.#.#.
...#.#...#####.
...#.#####...#.
###...#..###..#
..........###..

##....##....##.
##....##....##.
#.#.#....#.#.#.
##..##...#..##.
####......####.
#.#...##...#.##
.#####..#####..

......###..
.#..#.####.
.#..#.###..
.####...###
.####...###
.#..#.###..
.#..#.####.
......###..
..##..##...
##..###..##
.####...#..
##..###.#.#
..##...##..
##..#####.#
###.##.#...

......##.#.#.
.#.....#...#.
###.#..#...##
#..#.##.#...#
#..#.####...#
###.#..#...##
.#.....#...#.
......##.#.#.
##.######...#
...#...##.###
#....#####..#
..##..#..##.#
#.####..#.###
.##...###.#..
.#..#.###.##.
.#..#.###.##.
.##...###.#..

.###..###.##.
###.###..#.#.
..###......#.
#..#..#.#...#
.#..#.....#.#
.#.#...##.#.#
##...##..##.#
##...##..##.#
.#.#...##.#.#
.#.##.....#.#
#..#..#.#...#
..###......#.
###.###..#.#.
.###..###.##.
.###..###.##.

###.####.##
##........#
#..........
#.########.
..##....##.
.#.#.##.#.#
.#........#
#.........#
.##......##
###..##..##
#####..####
#####..####
###..##..##

##.#.#..#..
....#...##.
##..#.#..#.
...######..
#######..##
##.##..#.##
..#..####.#
###...##...
......##.#.
###.#..#..#
..##..###..
...#.#.##.#
...#.#.##.#
..##.####..
###.#..#..#
......##.#.
###...##...

#####.#.##...#.
......######...
#...#.#.#.#..##
..####.#.#.##.#
..######.#.##.#
#...#.#.#.#..##
......######...
#####.#.##...#.
.#...##..###...
.#...##..###...
#####.#.##...#.

####.#.
#..####
#..#..#
#..#..#
.##.#..
.##..##
...#..#
....##.
#..####
#..####
....##.

###...##.###...##
###.####...####.#
...#..#.##.#.##..
...#..#.##.#.##..
###.####...####.#
###...##.###...##
.#.#.#.##.#....##
.#.#.#.##.#....##
###...##.#.#...##

.##.....#
........#
#####..#.
#####..#.
####..###
....##...
....####.
#..###..#
.##..##.#
.##..##.#
#..###..#
....###..
....##...
####..###
#####..#.
#####..#.
........#

.#...##
.#...##
##.....
.#.####
##.##..
#....#.
.####..
#....#.
#....#.
.####.#
#....#.
##.##..
.#.####

..#.#.##...
..#.#.###..
##.##..###.
..####...#.
##.#....###
.#...#####.
..#.##.###.
.#....##...
.#..#.##..#
.#..#.##..#
.#....##...
..#.##.###.
.#...#####.
##.#....###
..####...#.

####.#####....#
#..#.###..#..#.
####.####....##
#######..###.##
#..###..##....#
.##..###.#...##
.##..###.#...##
#..###..##....#
#####.#..###.##
####.####....##
#..#.###..#..#.
####.#####....#
.##.####.##.#.#

####.##
..##.#.
..##...
.#.....
....##.
##..#.#
###...#
##.##.#
..##...
..##...
##.##.#

#.#.#.#.....##...
..#...#...#....#.
.##..##..##.##.##
...#.##.##......#
###..##.#.#.##.#.
.##.####..#....#.
.###..##.........
..#.###..#.####.#
.#...#.#..#.##.#.
###...######..###
#.#####...######.
###.###.#..####..
##..##.###..#...#
##..#..##.######.
##..#..##.######.

.###.#..#.###..##
####.#..#.#######
.##..#..#..#....#
##.#.####.#.####.
...#......#......
....#....#.......
......##.........
#.##..##..##.##.#
.##.######.##..##

...######...#.#
...######...#.#
..###..###....#
.##.####.##..##
.#.######.#....
###.#..#.##..##
#.#..##..#.###.
.##......##.###
###.####.###.##
.#..####..#...#
.###.##.###.###
##.######.###.#
#..##..##..#.#.

....##.....##..##
.##.##.##..#....#
..#....#.....##..
.##.##.##..#....#
##########.......
###########.####.
..#.##.#..#.#..#.
#..####..###....#
..##..##.........
..##..##...######
#........#.#....#
#.######.####..##
.###..###..#.##.#
.##....##...#..#.
....##...#.#.##.#

.##...#..####
.....####..##
#######.#..#.
#..###.#.###.
#..#.##...###
#########.#..
#..#..##...##
.##..##.#####
#..#..#..##..
#######.##.#.
####..#......
#..##.#...##.
.##...#.#..##
.##...#.#..#.
#..##.#...##.

###.#........
..#.##.......
##.##..#.....
.##.##..#####
.#....#..####
##...#..#....
###..########
.###..#..#..#
.#.#.#.......
######.......
#...#..######
.##....######
#...#.#.#####
.#.#...######
####..#..####

###....
###....
.####..
#.#.##.
..##..#
.##.#.#
#.####.
##.#.##
#.##.##
.#....#
.#.#.#.
.#..#.#
#..####
#..####
.#..#.#
.#.#.#.
.#.#..#

####..##.
.##..#..#
....#.###
....#.##.
....#.#..
.##..###.
.##..###.
....#.#..
....#.##.
....#.###
.##..#..#
####..##.
##.###...
#..#...#.
####.....

##....#####
.######.#..
#..##..#...
#..##..####
.######....
.#......#..
..#..#..###

###.#...###
...####...#
..#..#..#.#
..##.#.#..#
###.##..###
###..#....#
##...#....#
###.##..###
..##.#.#..#
..#..#..#.#
...####...#
###.#...###
..####.#.#.

...#.##..#...#...
#.#...###.##.####
....#.#.##.#.##..
.....#.#.####.#..
.#.#.#.##..#.####
.#.#...##..#.####
.....#.#.####.#..
....#.#.##.#.##..
#.#...###.##.####
...#.##..#...#...
...#....###...#..
#..###.......##..
.#.###.#.###.####

...####..
.##....##
.########
##......#
#..#..#..
....##...
#..####..

####..##.##
###.#...##.
....#..####
#...##..#..
..#..#...#.
..#..#...#.
#...##..#..
....#..####
###.#...##.
####..##.##
..###...##.
#.#.#.##.#.
.####..#...
..###..#...
#.#.#.##.#.

.....####.....#..
##.#.#..#.#.##...
.#.#......#.#.###
...###..###...#..
.#..######..#.#..
####.####.#####..
...###..###...#..
#............#.##
..#.#.##.#.#.#...
#..###..###..#...
...#......#....##
##...####...##.##
#...##..##...#.##

.####..###.
.##.###.#..
.##.###.#..
.####..###.
#.#.#.#.###
####.####..
#.....##.#.
#.....##.#.
####.####..
#.#.###.###
.####..###.

.....#..#..
#..###..###
####......#
.##.#.##.#.
#..#######.
#..#..##..#
.....#..#..

##..#....
...#.#.##
###...###
....###..
##..###..
###.###..
###....##
#....#...
####...##
##.###...
.......##
..#.###..
##..###..
...#..###
###...###

..#.##.#...####
##.#..#.##.####
.###..###......
.##....##...#..
..##..##...####
..#....#.....##
#.#..#.#.#..#..
..#.##.#...#...
#...##...##..##
.##....##.#####
#...##...#..###
.#..##..#.###..
#...##...##..##

#....#.#.
###..###.
###..###.
#....#.#.
#.#.#..#.
...##..#.
.#..###.#
#...#....
#...##...
##.###..#
#..##.##.
#..##.##.
##.###..#
#....#...
#...#....
.#..###.#
...##..#.

.#...#.#.
#.##.##..
####..#..
.#.######
...##.###
...##.###
.#.#####.
####..#..
#.##.##..
.#...#.#.
.#...#.#.

####.#..#.#####.#
##.##....##.####.
#..#.####.#..##..
#####....########
###..####..######
#####....########
#.##..##..##.##.#
##.#..##..#.####.
#..#......#..##..
..##......##....#
#............##..
##.##....##.####.
...#......#......
....#.##.#.......
.####....####..##
.#..........#..#.
.##.#.##.#.##..##

#..#...##..
..######.##
..######.##
#..#..###..
....#.#....
##....##...
#.#.#.##..#
#.#.#.##..#
##....##...
....#.#....
#..#..###..

#..#..#..#...
..##..##..##.
..#.##.#..#.#
############.
#.######.##..
#.######.#.##
#.######.#..#
#.######.##..
############.

..##..###.#..#.
...#......#..#.
#.##.......##..
.....##.#.#..#.
.....##.#.#..#.
#.##.......##..
...#......#..#.
..##..###.#..#.
#.#.##...##..##
#####.##..#..#.
#......##......
#.#..##.###...#
##.#......#..#.
##..#.#...#..#.
.#.###...######

##..#.#..##..###.
.##.#.#.#..##..#.
...#...##.#..#.##
.##.##...##..##..
.##.##...##..##..
...#...##.#..#.##
.##.#.#.#..##..#.

.#.####..####.#..
#.###.####.###.##
####..#..#..#####
..#.##.##.##.#...
#.##.#.##.#..#.##
#..#..####..#..##
#.####.##.####.##
##.###....###.###
##.#.#....#.#.###
..##...##...##...
..###..##..###...

..#.#...##....#..
####..#..#..###.#
#####.#..#..###.#
..#.#...##....#..
##.#.##.....###..
..####.########..
...##.##.#####.#.
..#.#......#....#
##..####.#.......
..##...#...#.##.#
....#.##....#..##

.#.##.##..#
####.#..##.
##..##.####
##..##.####
####.#..##.
...##.##..#
.#.........

##.#..#.#
#.#.#..##
#####.##.
##..##...
##..##...
#####..#.
#.#.#..##
##.#..#.#
.##..##..
.##..##..
##.#..#.#

###...##....#.###
#.#..#.#.#.###..#
.##.#.#.#.##.#.#.
.##.#.#.#.##.#.#.
#.#..#.#.#.###.##
###...##....#.###
...#.#.#.##..##.#
#....####..##.#..
#....####..##.#..
...#.#.#.##..##.#
###...##....#.###

..#####..
.###.....
#..###...
####.#...
###..#...
#..###...
.###.....
..#####..
#.#.#####
..#.#####
##.#.####

...#....#####..
..###..#...#.##
##..#.###.#....
##....##.###...
..#..#...#.....
#..#.##.##.##..
.#.#..##.#.#.##
##..###.....#..
.##.##...##.#..
##...##..##.###
##.#.##..##.###

...####..##.##.
...#..#####....
##..####.###..#
##..#####...##.
...#..#.#.#....
..#..#.#.......
....#....#..##.
..####.#.#.####
####.#....##...
####.#.#.......
####.####.##..#
..###.....#....
##..###.###.##.

.####.###.#..
.####.###.#..
########.###.
#.###.##....#
#...#...#....
....##.#.#..#
.##......####
#...##.....#.
#.##...##..##
####...##.##.
####...##.##.
#.##...##..##
##..##.....#.

#......#.####
.######.#...#
.........####
##....##..#..
.#.##.#..#..#
###..###...#.
..####..#.#..
###..###..##.
........#....
##....###...#
##....###...#
........#.#..
###..###..##.
..####..#.#..
###..###...#.

.##.#.#...#...#
.##.#.#...#.#.#
#.##.####..###.
....#.#.##.####
#..#.#.#.#..###
.##...##.##..##
..##.##...##.#.
..#.#..###.##.#
#####.##....#.#
#...#.#...##.##
#.###......#..#
##..#..###.#.##
..#####..#..###
..#####..#..###
##..#..###.#.##

.##.##.
.#.##.#
#....#.
#....#.
.#.##.#
.##.##.
...####
##....#
#.#.###
.####.#
###..#.
###....
.####.#
#.#.###
##....#
...####
.##.##.

####.#....####..#
####.#....####..#
#..##...##.#..#.#
#..#..######..###
#..#..#.#########
.##..#.#...#.#...
#..###......#.##.
####.#.###...##.#
####.####..#..##.
....##.#.#.......
.##..##..#..#..##
###.#.#..#...####
####.###.###.#.#.

.######
.###..#
.###..#
.######
#..#..#
.#..###
.##..#.
.###...
##.#.#.
.##....
..#..##
.....##
.##....
##.#.#.
.###...

##....#####......
##....##.#..####.
.#....#..##.#..#.
##....##.#.##..##
.#.##.#....#....#
##....######.##.#
###..###.######.#
##....#####.####.
#......##..#....#
#.#..#.#..#.#..#.
.#.##.#...##.##.#
..####..#..#.##.#
.#.##.#.#..#....#

.#.#..###.###
.#.#...##.###
##......####.
#...#.##.#...
##..#.###..#.
.####..#.###.
#...#..#..#..
.####.##..#..
.##..#..#...#
.##..#..#...#
.####.##..#..
#...#..#..#..
.####..#.###.

#...#....#.#.
##.#.#.#.##.#
###.##...#.#.
###.##...#.#.
##.#.#.####.#
#...#....#.#.
..#.######..#
#...#..####..
###..##.##.#.
...#.#.#..#..
...#.#.#..#..
###..##.##.#.
#...#..####..

..#.###
######.
..####.
###...#
###...#
..##.#.
######.
..#.###
..##.##
.....#.
###..##
..####.
######.
##...#.
####...
..#.#..
##.###.

.#..#.###.##...##
..##...#.##....#.
###########....#.
#######...###...#
#....##.#..#....#
#....#.##.#..##.#
.####.#.#.#.....#
.####....##.##..#
##..##..#..####..
.#..#.#...####..#
#.##.##.#.###..#.
#.##.##.#.#.#..#.
.#..#.#...####..#
##..##..#..####..
.####....##.##..#

##..##.##
.#..#....
..##..###
#.##.##..
.......##
..##.....
#....##..
..##...##
#....#.##
#.##.#.##
..##.....
#.##.#...
...#..###

#..##....##..##.#
.###.####.###.###
###..#..#..#####.
.#.##.##.##.#...#
.#.##.##.##.#...#
###..#..#..#####.
.###.####.###.###
#..##....##..##.#
.#.##.##.##.#.#..
....##..##.....##
#....#..#.#..####
.#...####...#.#.#
#.#.#....#.#.##.#
#..##.##.##..#...
#....#..#....##..

#....####
###......
###......
##...####
....#....
.#.#..##.
..###....
##.#.....
...#..##.
#.###.##.
#....####

#..####..#.##.#..
.########..##..##
#........#.##.#..
###.##.###.##.###
###.##.####..####
..##..##........#
..######........#
#.#.##.#.#.##.#.#
.##.##.##.####.##
#.##..##.##..#..#
.#.####.#......#.
....##....####...
.##.##.##......##

..####..##..##..#
...#..##.####.##.
.##.#.##..##..##.
...#..##.####.##.
.##..#..#....#..#
##.##.##########.
#########.##.####

.###..###.#.#.###
###....###..##.#.
###.##.###.#.#.##
###.##.###.#.#.##
###....###..##.#.
.###..###.#.#.###
.#.####.#...#.#..
##.#..#.###...#..
####..###..#.###.
#..####..##.#..#.
#.######.##..#.##
.##.##.##.##..##.
####..######.####
....##.....#.##..
####..#####...###

#...#.#.#...#
#.####.#..#..
#.####.#..#..
#...#.#.#...#
#.#.##...#.##
#####.#.#..#.
#.#....####.#
##.#.#.#####.
#####.##.#..#
....##.#...#.
.#..#...#.#..
#.#.###...##.
...#..##...#.
..##..##...#.
#.#.###...##.
.#..#...#.#..
....##.#...#."""

class Day13:
    def __init__(self) -> None:
        self.input = sam_input # get_input(2023, 13)
        self.parsed_input = re.split(r'\n\n', self.input.strip())
        self.grids = [Grid(block) for block in self.parsed_input]
        return
    
    def check_column(grid: Grid, size_y: int, x: int, negative_x: int) -> bool:
        for y in range(size_y):
            if grid.get(x, y) != grid.get(negative_x, y):
                return False
        return True
    
    def check_row(grid: Grid, size_x: int, y: int, negative_y: int) -> bool:
        for x in range(size_x):
            if grid.get(x, y) != grid.get(x, negative_y):
                return False
        return True
    
    def check_x_split(grid: Grid, split_x: int, size_x: int, size_y: int) -> bool:
        rows_to_check = min(split_x, (size_x + 1) - split_x)
        for x in range(split_x, split_x + rows_to_check):
            negative_x = split_x - (x - split_x) - 1
            if not Day13.check_column(grid, size_y, x, negative_x):
                return False
        return True
    
    def check_y_split(grid: Grid, split_y: int, size_x: int, size_y: int) -> bool:
        columns_to_check = min(split_y, (size_y + 1) - split_y)
        for y in range(split_y, split_y + columns_to_check):
            negative_y = split_y - (y - split_y) - 1
            if not Day13.check_row(grid, size_x, y, negative_y):
                return False
        return True
    
    def check_reflection(grid: Grid) -> tuple[int, int]:
        size_x, size_y = grid.size()
        # Check columns
        for split_x in range(1, size_x):
            if Day13.check_x_split(grid, split_x, size_x, size_y):
                return (split_x, 0)
        # Check rows
        for split_y in range(1, size_y):
            if Day13.check_y_split(grid, split_y, size_x, size_y):
                return (0, split_y)
        raise Exception('No reflection found!')

    def solve(self, part_2: bool) -> None:
        start_time = time.time()
        vertical_reflections = 0
        horizontal_reflections = 0
        for i, grid in enumerate(self.grids):
            reflections = Day13.check_reflection(grid)
            vertical_reflections += reflections[0]
            horizontal_reflections += reflections[1]
            print(f'({i}, {'h' if reflections[0] > 0 else 'v'}, {reflections[0] if reflections[0] > 0 else reflections[1]})')
        print(f'Part {'2' if part_2 else '1'}: {horizontal_reflections * 100 + vertical_reflections} - {time.time() - start_time}')


def main() -> None:
    day = Day13()
    day.solve(False)
    day.solve(True)
    return


if __name__ == "__main__":
    main()
